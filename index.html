<label for="preset">圧縮プリセットを選択：</label>
<select id="preset">
  <option value="x264">高品質（x264）</option>
  <option value="amf">標準圧縮（AV1/AMF）</option>
  <option value="svt">高圧縮（SVT-AV1）</option>
</select>

<input type="file" id="fileInput">
<button onclick="upload()">アップロードして圧縮</button>

<script>
async function upload() {
  const file = document.getElementById('fileInput').files[0];
  const preset = document.getElementById('preset').value;
  const formData = new FormData();
  formData.append('video', file);
  formData.append('preset', preset);

  const res = await fetch('/convert', {
    method: 'POST',
    body: formData
  });

  const blob = await res.blob();
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = file.name.replace(/\.\w+$/, '_comp.mp4');
  a.click();
}
</script>
